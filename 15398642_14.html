<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>A RENDITION OF THE TRENCH SAGA</title>

  <style>
    :root{
      --bg:#000;
      --fg:#fff;
      --pulse-green:0 0 12px 3px rgba(0,255,0,0.8);
      --pulse-red:0 0 12px 3px rgba(255,0,0,0.8);
      --pulse-yellow:0 0 12px 3px rgba(255,255,0,0.9);
      --pulse-bishop:0 0 12px 3px rgba(255,50,50,0.9);
    }

    html,body{
      height:100%;
      margin:0;
    }

    body{
      background:var(--bg);
      color:var(--fg);
      font-family:"Courier New", Courier, monospace;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .wrap{
      text-align:center;
      max-width:90vw;
    }

    h1{
      margin:0 0 1rem 0;
      font-size:clamp(2rem,6vw,5rem);
      letter-spacing:0.06em;
      font-weight:400;
    }

    .input-row{
      display:flex;
      gap:0.5rem;
      justify-content:center;
      align-items:center;
      margin-top:0.6rem;
    }

    input[type="text"]{
      background:transparent;
      color:var(--fg);
      border:1px solid rgba(255,255,255,0.25);
      padding:0.6rem 0.8rem;
      font:1rem/1 "Courier New", Courier, monospace;
      outline:none;
      border-radius:6px;
      min-width:220px;
      transition:box-shadow 0.25s ease;
    }

    input[type="text"]::placeholder{
      color:rgba(255,255,255,0.35);
    }

    button{
      background:transparent;
      color:var(--fg);
      border:1px solid rgba(255,255,255,0.25);
      padding:0.55rem 0.8rem;
      border-radius:6px;
      cursor:pointer;
      font:1rem/1 "Courier New", Courier, monospace;
      transition:box-shadow 0.25s ease;
    }

    button:active{
      transform:translateY(1px);
    }

    .pulse-green{ box-shadow:var(--pulse-green)!important; }
    .pulse-red{ box-shadow:var(--pulse-red)!important; }
    .pulse-yellow{ box-shadow:var(--pulse-yellow)!important; }
    .pulse-bishop{ box-shadow:var(--pulse-bishop)!important; }

    #song{
      margin-top:1rem;
      font-size:1.2rem;
    }
  </style>
</head>
<body>

<main class="wrap" role="main">
  <h1>A RENDITION OF THE TRENCH SAGA</h1>

  <!-- STEP 1 -->
  <div id="step1">
    <div class="input-row">
      <input id="q1" type="text" placeholder="When will you perform? (00/00)">
      <button id="b1">Enter</button>
    </div>
  </div>

  <!-- STEP 2 -->
  <div id="step2" style="display:none;">
    <div class="input-row">
      <input id="q2" type="text" placeholder="Who is the Nova Bishop?">
      <button id="b2">Enter</button>
    </div>
  </div>

  <!-- STEP 3 -->
  <div id="step3" style="display:none;">
    <div class="input-row">
      <input id="q3" type="text" placeholder="Bandito or Bishop?">
      <button id="b3">Enter</button>
    </div>
  </div>

  <!-- FINAL -->
  <div id="final" style="display:none;">
    <div id="song"></div>
    <button onclick="location.reload()">Restart</button>
  </div>

</main>

<!-- SOUNDS -->
<audio id="correctSound" src="correct.mp3"></audio>
<audio id="finalSound" src="final.mp3"></audio>

<script>
function norm(s){ return (s||'').trim().toLowerCase(); }

function pulse(el, cls){
  el.classList.remove("pulse-green","pulse-red","pulse-yellow","pulse-bishop");
  void el.offsetWidth; 
  el.classList.add(cls);
}

function playCorrect(){ document.getElementById("correctSound").play(); }
function playFinal(){ document.getElementById("finalSound").play(); }

const q1=document.getElementById("q1");
const q2=document.getElementById("q2");
const q3=document.getElementById("q3");

document.getElementById("b1").onclick = ()=>{
  const v = norm(q1.value);
  if(v==="21/12"){
    pulse(q1,"pulse-green");
    playCorrect();
    step1.style.display="none";
    step2.style.display="block";
    q2.focus();
  } else {
    pulse(q1,"pulse-red");
  }
};

document.getElementById("b2").onclick = ()=>{
  const v = norm(q2.value);
  if(v==="clancy"){
    pulse(q2,"pulse-green");
    playCorrect();
    step2.style.display="none";
    step3.style.display="block";
    q3.focus();
  } else {
    pulse(q2,"pulse-red");
  }
};

document.getElementById("b3").onclick = ()=>{
  const v = norm(q3.value);
  if(!["bandito","bishop","obispo"].includes(v)){
    pulse(q3,"pulse-red");
    return;
  }

  step3.style.display="none";
  final.style.display="block";

  // BANDITO
  if(v==="bandito"){
    pulse(q3,"pulse-yellow");
    document.getElementById("song").innerHTML =
      "<span style='color:yellow;'>Song: Levitate</span>";
    playFinal();
  }

  // BISHOP
  if(v==="bishop" || v==="obispo"){
    pulse(q3,"pulse-bishop");
    document.getElementById("song").innerHTML =
      "<span style='color:red;'>Song: City Walls</span>";
    playFinal();
  }
};
</script>

</body>
</html>




